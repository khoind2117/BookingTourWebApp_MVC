@model IEnumerable<BookingTourWebApp_MVC.ViewModels.CustomerInfo>

@{
    ViewData["Title"] = "Index";
    Layout = "_LayoutAdminManagement";
}
<style>
    .div-margin{
        margin-block:15px;
    }
</style>
<h1>Customer Management</h1>
<div class="row div-center" style="margin-block:20px">
    <div class="col-3 div-center" style="padding-left:160px;background-color:red">
        <div style="width:200px;height:30px;border-radius:5px;">
            <span>Tìm kiếm danh sách theo:</span><span> </span>
        </div>

    </div>
    <div class="col-2 div-center" style="background-color:yellow">
        <select id="typeKeyword" style="width:200px;height:30px;border-radius:5px;">
            <option value="fullname" selected>UserName</option>
            <option value="phonenumber">PhoneNumber</option>
            <option value="gmail">Gmail</option>
        </select>
    </div>
    <div class="col-4" style="background-color:red">
        <input style="width:400px;height:30px;border-radius:5px;" id="txtKeyword" placeholder="Tìm gì?" />
    </div>
    <div class="col-3" style="background-color:yellow">
        <button style="width:100px;height:30px;border-radius:5px;" id="btnSearch" type="submit">Tìm kiếm</button>
    </div>
</div>

<button id="btnSortASC" type="submit">Sap xep tang dan</button>
<button id="btnSortDESC" type="submit">Sap xep giam dan</button>
<button id="btnRefresh" type="submit">Refresh</button>
<div style="margin-inline:5px;height:10px">

</div>
<div id="result" >


    <table class="table table-striped table-bordered" style="border-radius:12px;overflow:hidden;border:1px solid #146C94;">
        <thead style="background-color:#146C94">
            <tr style="text-align:center;color:#F6F1F1">
                <th>
                    @Html.DisplayNameFor(model => model.userName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.fullName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.gmail)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.phoneNumber)
                </th>
                
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr style="text-align:center;text-decoration:none;">
                    <td>
                        @Html.DisplayFor(modelItem => item.userName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.fullName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.gmail)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.phoneNumber)
                    </td>

                </tr>
            }
        </tbody>
        
    </table>
</div>

@section Scripts {
    <script>
		$(document).ready(function () {
			$("#btnSearch").click(function () {
				let giaTriTim = $("#txtKeyword").val().trim();
				let loaiTim = $("#typeKeyword").val();
				if (giaTriTim.length > 0) {
					$.ajax({
						url: "/CustomerManagement/HandleSearchUser",
						data: { "keyword": giaTriTim, "typekw": loaiTim},
						success: function(res1){
							$("#result").html(res1);
						}
					});
				}
			});
            $("#btnSortASC").click(function () {

                
                    $.ajax({
                        url: "/CustomerManagement/SortASC",
                        type: 'GET',
                        success: function (res2) {
                                $("#result").html(res2);
                               
                        }
                    });
                
            });
            $("#btnSortDESC").click(function () {
                
                    $.ajax({
                        url: "/CustomerManagement/SortDESC",
                    type: 'GET',
                        success: function (res3) {
                            $("#result").html(res3);
                        }
                    });
                
            });
            $("#btnRefresh").click(function () {

                $.ajax({
                    url: "/CustomerManagement/RefreshUserList",
                    type: 'GET',
                    success: function (res4) {
                        $("#result").html(res4);
                    }
                });

            });
		});
	</script>
}

